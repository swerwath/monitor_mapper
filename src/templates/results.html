{% extends "base.html" %}
{% block css %}
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/results.css') }}">
{% endblock %}

{% block js %}
<script>lat = {{ lat }}; long = {{ long }};</script>
<script>m = {{ monitors|tojson }};</script>
<script>nm = {{ nearest_monitors|tojson }};</script>
<script>f = {{ facilities|tojson }};</script>
<script>orgs = {{ orgs|tojson }};</script>
<script type=text/javascript src="{{ url_for('static', filename='js/jquery.waypoints.min.js') }}"></script>
<script type=text/javascript src="{{ url_for('static', filename='js/results.js') }}"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key={{ KEY }}&callback=initMap"></script>
{% endblock %}

{% block body %}

<div class="container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar-nav-fixed affix">
        <div class="well" id="mapwell">
          <div id="map"></div>
          <div id="well-footer">
            <h4 id="map-caption">Placeholder</h4>
          </div>
        </div>
        <!--/.well -->
      </div>
      <!--/sidebar-nav-fixed -->
    </div>
    <!--/span-->

    <div class="col-md-3"></div>

    <div class="col-md-6">
      <div class="jumbotron sidecontent">
        <h2 id="pm25">PM<sub>2.5</sub></h2>
        <h4 id="pm25-dist">Placeholder</h4>
        <h4 id="pm25-read">Placeholder</h4>
        <p class="sideparagraph">This is a template for a simple marketing or informational website. It
          includes a large callout called the hero unit and three supporting pieces
          of content. Use it as a starting point to create something more unique. This is a template for a simple marketing or informational website. It
          includes a large callout called the hero unit and three supporting pieces
          of content. Use it as a starting point to create something more unique.</p>
          <p><a class="btn btn-primary btn-lg">Learn more »</a>
          </p>
        </div>
        <div class="jumbotron sidecontent">
          <h2 id="no2">NO<sub>2</sub></h2>
          <h4 id="no2-dist">Placeholder</h4>
          <h4 id="no2-read">Placeholder</h4>

          <p>This is a template for a simple marketing or informational website. It
            includes a large callout called the hero unit and three supporting pieces
            of content. Use it as a starting point to create something more unique. This is a template for a simple marketing or informational website. It
            includes a large callout called the hero unit and three supporting pieces
            of content. Use it as a starting point to create something more unique.</p>
            <p><a class="btn btn-primary btn-lg">Learn more »</a>
            </p>
          </div>
          <div id="so2" class="jumbotron sidecontent">
            <h2>SO<sub>2</sub></h2>
            <h4 id="so2-dist">Placeholder</h4>
            <h4 id="so2-read">Placeholder</h4>

            <p class="sideparagraph">This is a template for a simple marketing or informational website. It
              includes a large callout called the hero unit and three supporting pieces
              of content. Use it as a starting point to create something more unique. This is a template for a simple marketing or informational website. It
              includes a large callout called the hero unit and three supporting pieces
              of content. Use it as a starting point to create something more unique.</p>
              <p><a class="btn btn-primary btn-lg">Learn more »</a>
              </p>
            </div>
            <div id="ozone" class="jumbotron sidecontent">
              <h2>Ozone</h2>
              <h4 id="ozone-dist">Placeholder</h4>
              <h4 id="ozone-read">Placeholder</h4>

              <p class="sideparagraph">This is a template for a simple marketing or informational website. It
                includes a large callout called the hero unit and three supporting pieces
                of content. Use it as a starting point to create something more unique. This is a template for a simple marketing or informational website. It
                includes a large callout called the hero unit and three supporting pieces
                of content. Use it as a starting point to create something more unique.</p>
                <p><a class="btn btn-primary btn-lg">Learn more »</a>
                </p>
              </div>

            </div>
            <!--/span-->
          </div>
          <!--/row-->

          <div class="row">
            <div class="col-md-6">
              <div class="jumbotron bottomcontent">
                <h2 id="getinvolved">Get Involved</h2>
                <p class="sideparagraph">This is a template for a simple marketing or informational website. It
                  includes a large callout called the hero unit and three supporting pieces
                  of content. Use it as a starting point to create something more unique. This is a template for a simple marketing or informational website. It
                  includes a large callout called the hero unit and three supporting pieces
                  of content. Use it as a starting point to create something more unique.</p>
                  <p><a class="btn btn-primary btn-lg">Learn more »</a>
                  </p>
                </div>
              </div>
              {% for org in orgs %}
              <div class="col-md-6">
                <div class="jumbotron orgcontent">

                  <div class="row">
                    <div class="col-md-4 org-img-col">
                      <img src="{{ org['Image'] }}" class="img-thumbnail org-img">
                    </div>
                    <div class="col-md-8 org-col">
                      <h2 id="getinvolved">{{ org['Name'] }}</h2>
                      <p class="sideparagraph">{{ org['Description'] }}</p>
                    </div>
                  </div>
                  <div class="row link-row">
                  <p><a class="btn btn-primary btn-lg org-link" href="{{ org['Website'] }}" target="_blank">Learn More</a></p>
                </div>
                </div>
              </div>
              {% endfor %}

            </div>
          </div>
          <!--/.fluid-container-->

          <script>

          const WP_OFFSET = 30;

          var pm25Waypoint = new Waypoint({
            element: document.getElementById('pm25'),
            handler: function() {
              setMarkerSetVisible("PM2.5", monitorMarkerSets);
              setMapCaptionChemical("PM<sub>2.5</sub>");
            },
            offset: WP_OFFSET
          });

          var no2Waypoint = new Waypoint({
            element: document.getElementById('no2'),
            handler: function() {
              setMarkerSetVisible("NO2", monitorMarkerSets);
              setMapCaptionChemical("NO<sub>2</sub>");
            },
            offset: WP_OFFSET
          });

          var so2Waypoint = new Waypoint({
            element: document.getElementById('so2'),
            handler: function() {
              setMarkerSetVisible("SO2", monitorMarkerSets);
              setMapCaptionChemical("SO<sub>2</sub>");
            },
            offset: WP_OFFSET
          });

          var ozoneWaypoint = new Waypoint({
            element: document.getElementById('ozone'),
            handler: function() {
              setMarkerSetVisible("OZONE", monitorMarkerSets);
              setMapCaptionChemical("Ozone");
              document.getElementById("mapwell").hidden = false;
            },
            offset: WP_OFFSET
          });

          var bottomWaypoint = new Waypoint({
            element: document.getElementById('ozone-read'),
            handler: function() {
              document.getElementById("mapwell").hidden = true;
            },
            offset: -2 * WP_OFFSET
          });

          fillNearestInfo(nm);
          </script>
          {% endblock %}
